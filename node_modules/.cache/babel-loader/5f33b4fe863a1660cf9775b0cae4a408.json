{"ast":null,"code":"import * as actionTypes from './actionTypes';\nimport axios from 'axios';\nimport ability from '../../shared/ability';\nexport var authStart = function authStart() {\n  return {\n    type: actionTypes.AUTH_START\n  };\n};\nexport var authSuccess = function authSuccess(userId, username) {\n  return {\n    type: actionTypes.AUTH_SUCCESS,\n    userId: userId,\n    username: username\n  };\n};\nexport var authFail = function authFail(error) {\n  return {\n    type: actionTypes.AUTH_FAIL,\n    error: error\n  };\n};\nexport var logout = function logout() {\n  sessionStorage.removeItem('token');\n  localStorage.removeItem('username');\n  localStorage.removeItem('userId');\n  return {\n    type: actionTypes.AUTH_LOGOUT\n  };\n};\nexport var auth = function auth(username, password) {\n  return function (dispatch) {\n    dispatch(authStart());\n    var authData = {\n      // username: username,\n      // password: password,\n      // grant_type: 'password',\n      // client_id: process.env.CLIENT_ID,\n      // client_secret: process.env.CLIENT_SECRET,\n      Authorization: 'Bearer eyJhbGciOiJFUzUxMiIsInR5cCI6IkpXVCIsImlzcyI6InBac3VSSEd0TklkRTFRZmZrMlA4Q0kyTVF0V0tYaXo5In0.eyJ1c2VybmFtZSI6IlRlc3QiLCJwYXNzd29yZCI6InBhc3N3b3JkIiwiZ3JhbnRfdHlwZSI6InBhc3N3b3JkIiwiY2xpZW50X2lkIjoiWXF1dmVWTlFPekRQR0hqUG1CMlc1UUtKSm40eTdLa01nRUFVdEVSS3hJYyIsImNsaWVudF9zZWNyZXQiOiJmUEREbXVyVEV6M2oxQV9DQlU2X0Q5S3BRUUtaaFhReVRuZ0xuMlF3SXlBIn0.AVfJXcni_-zDfrtNdbPR7paw2Du7n74m6l1V0HzYoAGc5xv6r-nfXEIzoUA7hEM1aSMr_UfRNvQXXaCuCgaFzjjEANq4qrL0EGKLq-Y8cxvQITcusESzphNtf8Al3Qn366cz_OwlkA1GKbGMJf-ssZeixq_EDSoCJfiQj2nZsFijneWV'\n    };\n    var url = 'http://localhost:8000/oauth/token';\n    axios.post(url, authData).then(function (response) {\n      sessionStorage.setItem('token', response.data.access_token);\n      localStorage.setItem('username', response.data.username);\n      localStorage.setItem('userId', response.data.userId);\n      console.log(response);\n      ability.update(response.data.rules);\n      dispatch(authSuccess(response.data.userId, response.data.username));\n    }).catch(function (err) {\n      dispatch(authFail(err));\n    });\n  };\n};","map":{"version":3,"sources":["/home/developer/Projects/jetter/client/store/actions/auth.js"],"names":["actionTypes","axios","ability","authStart","type","AUTH_START","authSuccess","userId","username","AUTH_SUCCESS","authFail","error","AUTH_FAIL","logout","sessionStorage","removeItem","localStorage","AUTH_LOGOUT","auth","password","dispatch","authData","Authorization","url","post","then","response","setItem","data","access_token","console","log","update","rules","catch","err"],"mappings":"AAAA,OAAO,KAAKA,WAAZ,MAA6B,eAA7B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,sBAApB;AAEA,OAAO,IAAMC,SAAS,GAAG,SAAZA,SAAY,GAAM;AAC7B,SAAO;AACLC,IAAAA,IAAI,EAAEJ,WAAW,CAACK;AADb,GAAP;AAGD,CAJM;AAMP,OAAO,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,MAAD,EAASC,QAAT,EAAsB;AAC/C,SAAO;AACLJ,IAAAA,IAAI,EAAEJ,WAAW,CAACS,YADb;AAELF,IAAAA,MAAM,EAAEA,MAFH;AAGLC,IAAAA,QAAQ,EAAEA;AAHL,GAAP;AAKD,CANM;AAQP,OAAO,IAAME,QAAQ,GAAG,SAAXA,QAAW,CAACC,KAAD,EAAW;AACjC,SAAO;AACLP,IAAAA,IAAI,EAAEJ,WAAW,CAACY,SADb;AAELD,IAAAA,KAAK,EAAEA;AAFF,GAAP;AAID,CALM;AAOP,OAAO,IAAME,MAAM,GAAG,SAATA,MAAS,GAAM;AAC1BC,EAAAA,cAAc,CAACC,UAAf,CAA0B,OAA1B;AACAC,EAAAA,YAAY,CAACD,UAAb,CAAwB,UAAxB;AACAC,EAAAA,YAAY,CAACD,UAAb,CAAwB,QAAxB;AAEA,SAAO;AACLX,IAAAA,IAAI,EAAEJ,WAAW,CAACiB;AADb,GAAP;AAGD,CARM;AAUP,OAAO,IAAMC,IAAI,GAAG,SAAPA,IAAO,CAACV,QAAD,EAAWW,QAAX,EAAwB;AAC1C,SAAO,UAAAC,QAAQ,EAAI;AACjBA,IAAAA,QAAQ,CAACjB,SAAS,EAAV,CAAR;AAEA,QAAMkB,QAAQ,GAAG;AACf;AACA;AACA;AACA;AACA;AACAC,MAAAA,aAAa,EAAE;AANA,KAAjB;AASA,QAAIC,GAAG,GAAG,mCAAV;AAEAtB,IAAAA,KAAK,CAACuB,IAAN,CAAWD,GAAX,EAAgBF,QAAhB,EACGI,IADH,CACQ,UAAAC,QAAQ,EAAI;AAChBZ,MAAAA,cAAc,CAACa,OAAf,CAAuB,OAAvB,EAAgCD,QAAQ,CAACE,IAAT,CAAcC,YAA9C;AACAb,MAAAA,YAAY,CAACW,OAAb,CAAqB,UAArB,EAAiCD,QAAQ,CAACE,IAAT,CAAcpB,QAA/C;AACAQ,MAAAA,YAAY,CAACW,OAAb,CAAqB,QAArB,EAA+BD,QAAQ,CAACE,IAAT,CAAcrB,MAA7C;AACAuB,MAAAA,OAAO,CAACC,GAAR,CAAYL,QAAZ;AACAxB,MAAAA,OAAO,CAAC8B,MAAR,CAAeN,QAAQ,CAACE,IAAT,CAAcK,KAA7B;AACAb,MAAAA,QAAQ,CAACd,WAAW,CAACoB,QAAQ,CAACE,IAAT,CAAcrB,MAAf,EAAuBmB,QAAQ,CAACE,IAAT,CAAcpB,QAArC,CAAZ,CAAR;AACD,KARH,EASG0B,KATH,CASS,UAAAC,GAAG,EAAI;AACZf,MAAAA,QAAQ,CAACV,QAAQ,CAACyB,GAAD,CAAT,CAAR;AACD,KAXH;AAYD,GA1BD;AA2BD,CA5BM","sourcesContent":["import * as actionTypes from './actionTypes';\nimport axios from 'axios';\nimport ability from '../../shared/ability';\n\nexport const authStart = () => {\n  return {\n    type: actionTypes.AUTH_START\n  }\n}\n\nexport const authSuccess = (userId, username) => {\n  return {\n    type: actionTypes.AUTH_SUCCESS,\n    userId: userId,\n    username: username,\n  }\n}\n\nexport const authFail = (error) => {\n  return {\n    type: actionTypes.AUTH_FAIL,\n    error: error\n  }\n}\n\nexport const logout = () => {\n  sessionStorage.removeItem('token');\n  localStorage.removeItem('username');\n  localStorage.removeItem('userId');\n\n  return {\n    type: actionTypes.AUTH_LOGOUT\n  }\n}\n\nexport const auth = (username, password) => {\n  return dispatch => {\n    dispatch(authStart());\n\n    const authData = {\n      // username: username,\n      // password: password,\n      // grant_type: 'password',\n      // client_id: process.env.CLIENT_ID,\n      // client_secret: process.env.CLIENT_SECRET,\n      Authorization: 'Bearer eyJhbGciOiJFUzUxMiIsInR5cCI6IkpXVCIsImlzcyI6InBac3VSSEd0TklkRTFRZmZrMlA4Q0kyTVF0V0tYaXo5In0.eyJ1c2VybmFtZSI6IlRlc3QiLCJwYXNzd29yZCI6InBhc3N3b3JkIiwiZ3JhbnRfdHlwZSI6InBhc3N3b3JkIiwiY2xpZW50X2lkIjoiWXF1dmVWTlFPekRQR0hqUG1CMlc1UUtKSm40eTdLa01nRUFVdEVSS3hJYyIsImNsaWVudF9zZWNyZXQiOiJmUEREbXVyVEV6M2oxQV9DQlU2X0Q5S3BRUUtaaFhReVRuZ0xuMlF3SXlBIn0.AVfJXcni_-zDfrtNdbPR7paw2Du7n74m6l1V0HzYoAGc5xv6r-nfXEIzoUA7hEM1aSMr_UfRNvQXXaCuCgaFzjjEANq4qrL0EGKLq-Y8cxvQITcusESzphNtf8Al3Qn366cz_OwlkA1GKbGMJf-ssZeixq_EDSoCJfiQj2nZsFijneWV'\n    }\n\n    let url = 'http://localhost:8000/oauth/token';\n\n    axios.post(url, authData)\n      .then(response => {\n        sessionStorage.setItem('token', response.data.access_token);\n        localStorage.setItem('username', response.data.username);\n        localStorage.setItem('userId', response.data.userId);\n        console.log(response)\n        ability.update(response.data.rules);\n        dispatch(authSuccess(response.data.userId, response.data.username));\n      })\n      .catch(err => {\n        dispatch(authFail(err));\n      })\n  }\n}\n"]},"metadata":{},"sourceType":"module"}